<div class="dashboard-container">
  <!-- Sidebar -->
  <div class="sidebar" [class.open]="sidebarOpen" (click)="toggleSidebar()">
    <h2>MOScholar</h2>
    <ul>
      <li><a href="#" (click)="toggleEnrolledModal()">View Courses</a></li>
      <li><a href="#" (click)="logout()">Logout</a></li>
    </ul>
  </div>

  <!-- Topbar -->
  <div class="topbar">
    <div class="user-info">
      <button class="menu-toggle" (click)="toggleSidebar()">â˜°</button>
    </div>
    <span class="fs-5 fw-bold">Welcome, {{ role }} {{ Lastname }}</span>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <div class="stats">
      <div class="stat-card">Total Courses: {{ allCourses.length }}</div>
    </div>
    <div class="courses-grid">
      <div class="course-card" *ngFor="let course of allCourses">
        <img [src]="course.image" 
             alt="{{ course.title }}" 
             (error)="onImageError($event, course)" 
             style="max-width: 100%; height: auto;">
        <p *ngIf="!course.image || course.image === 'assets/placeholder.jpg'" class="no-image">
          No image available (Debug: {{ course.image }})
        </p>
        <h3>{{ course.title }}</h3>
        <p>{{ course.description }}</p>
        <p class="price">Price: {{ course.price }} NGN</p>
        <button (click)="enrollCourse(course.id)">Enroll</button>
        <button (click)="viewCourseDetails(course.id)">View Details</button>
      </div>
    </div>
  </div>

  <!-- Enrolled Courses Modal -->
  <div class="modal" [class.show]="showEnrolledModal">
    <div class="modal-content">
      <h2>My Enrolled Courses</h2>
      <div class="enrolled-courses-grid">
        <div class="course-card" *ngFor="let course of enrolledCourses">
          <img [src]="course.image" 
               alt="{{ course.title }}" 
               (error)="onImageError($event, course)" 
               style="max-width: 100%; height: auto;">
          <p *ngIf="!course.image || course.image === 'assets/placeholder.jpg'" class="no-image">
            No image available (Debug: {{ course.image }})
          </p>
          <h3>{{ course.title }}</h3>
          <p>{{ course.description }}</p>
          <p class="price">Price: {{ course.price }} NGN</p>
          <button (click)="viewCourseDetails(course.id)">View Details</button>
        </div>
      </div>
      <button type="button" (click)="toggleEnrolledModal()">Close</button>
    </div>
  </div>
</div>