<div class="dashboard-container">
  <!-- Sidebar -->
  <aside [class.open]="sidebarOpen" class="sidebar">
    <div class="sidebar-header">
      <h2 class="logo-text">MOScholar</h2>
    </div>
    <nav>
      <a (click)="toggleSidebar();">Dashboard</a>
      <a (click)="toggleSidebar();">My Courses</a>
      <a (click)="openCreateModal()">Create Course</a>
      <a (click)="toggleSidebar();">Profile</a>
      <a (click)="logout()">Logout</a>
    </nav>
  </aside>

  <!-- Overlay for mobile -->
  <div class="overlay" [class.show]="sidebarOpen" (click)="toggleSidebar()"></div>

  <!-- Main Content -->
  <main class="main-content" [class.shift]="sidebarOpen">
    <div class="topbar">
      <div class="fs-2 fw-bold text-warning">{{role}} {{Lastname}}</div>
      <div class="topbar-right">
        <button class="logo-toggle" [class.open]="sidebarOpen" (click)="toggleSidebar()">M</button>
        <button class="logo-toggle" [class.open]="sidebarOpen" (click)="load()">O</button>
        <button class="logo-toggle" [class.open]="sidebarOpen" (click)="logout()">S</button>
      </div>
    </div>

    <!-- Stats -->
    <div class="stats">
      <div class="card">
        <h3>{{courses.length}}</h3>
        <p>Courses</p>
      </div>
      <div class="card">
        <h3>--</h3>
        <p>Erudite Enrolled</p>
      </div>
      <div class="card">
        <h3>--</h3>
        <p>Revenue</p>
      </div>
    </div>

    <!-- Courses Grid -->
    <div class="courses-grid">
      <div class="course-card" *ngFor="let course of courses">
        <img [src]="course.image" alt="course image">
        <h3 style="text-transform:uppercase;">{{course.title}}</h3>
        <p  class="text-start">{{course.description}}</p>
        <p class="price">{{course.price > 0 ? 'â‚¦' + course.price : 'Free'}}</p>
        <div class="actions">
          <button (click)="upload(course.id)">Upload Video</button>
          <button (click)="editCourse(course.id)">Edit</button>
          <button (click)="deleteCourse(course.id)">Delete</button>
        </div>
      </div>
    </div>



    <!-- Create Course Modal -->
    <div class="modal" [class.show]="showCreateModal">
      <div class="modal-content">
        <h2>Create New Course</h2>
        <form [formGroup]="courseForm" (ngSubmit)="createCourse()">
          <input formControlName="title" class="coursetitle" placeholder="Course Title">
          <textarea formControlName="description" placeholder="Description"></textarea>


          <input type="number" minlength="1000" formControlName="price" placeholder="Price (NGN)" min="0">



          <input type="file" value="" (change)="onImageUpload($event)" accept="image/*" placeholder="Upload Thumbnail">
          <img *ngIf="courseForm.get('imageFile')?.value" [src]="courseForm.get('imageFile')?.value"
            class="thumbnail-preview">
          <button type="submit" [disabled]="courseForm.invalid">Create Course</button>
          <button type="button" (click)="closeCreateModal()">Cancel</button>
        </form>
      </div>
    </div>